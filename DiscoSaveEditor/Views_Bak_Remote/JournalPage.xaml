<Page
    x:Class="DiscoSaveEditor.Views.JournalPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:DiscoSaveEditor.ViewModels">

    <Grid Padding="32,24,32,32" RowSpacing="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Text="Journal / Quests" Style="{StaticResource TitleTextBlockStyle}" Grid.Row="0" />

        <AutoSuggestBox Grid.Row="1" PlaceholderText="Search quests..." QueryIcon="Find"
                         Text="{x:Bind ViewModel.SearchQuery, Mode=TwoWay}" />

        <Pivot Grid.Row="2">
            <PivotItem Header="Active">
                <ListView ItemsSource="{x:Bind ViewModel.ActiveTasks}" SelectionMode="None">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="vm:TaskDisplayItem">
                            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="4" Padding="12,8" Margin="0,2">
                                <Grid ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{x:Bind Description}" FontWeight="SemiBold" TextWrapping="Wrap" />
                                        <TextBlock Text="{x:Bind TaskName}" FontSize="10" Margin="0,2,0,0"
                                                   Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                                        <TextBlock Text="{x:Bind AcquiredTime}" FontSize="10"
                                                   Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                                    </StackPanel>

                                    <CheckBox Grid.Column="1" Content="New" 
                                              IsChecked="{x:Bind IsNew, Mode=TwoWay}" VerticalAlignment="Center" />

                                    <CheckBox Grid.Column="2" Content="Complete" 
                                              IsChecked="{x:Bind IsResolved, Mode=TwoWay}" VerticalAlignment="Center" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </PivotItem>

            <PivotItem Header="Completed">
                <ListView ItemsSource="{x:Bind ViewModel.CompletedTasks}" SelectionMode="None">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="vm:TaskDisplayItem">
                            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="4" Padding="12,8" Margin="0,2">
                                <StackPanel>
                                    <TextBlock Text="{x:Bind Description}" FontWeight="SemiBold" TextWrapping="Wrap" />
                                    <TextBlock Text="{x:Bind TaskName}" FontSize="10"
                                               Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </PivotItem>
        </Pivot>
    </Grid>
</Page>
